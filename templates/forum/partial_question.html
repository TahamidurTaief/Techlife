{% load static %}

<style>
    [x-cloak] {
        display: none !important;
    }
</style>

<!-- LEFT CONTENT (Post) -->
<div class="max-w-7xl mx-auto w-full lg:w-2/3 flex-shrink-0 ">
    {% comment %} Questions section {% endcomment %}
    <div class="bg-white p-6 mx-auto">
        <div class="py-5 px-4 mx-auto">
            <!-- Header -->
            <div class="flex items-start justify-between text-gray-500 pb-0">
                <!-- Left Side -->
                <div class="flex items-start gap-3">
                    <img src="{% static 'image/munna.jpeg' %}" class="w-10 h-10 rounded-full" />

                    <div class="flex flex-col leading-tight">
                        <div x-data="{ 
                                    hoverCardHovered: false,
                                    hoverCardDelay: 200,
                                    hoverCardLeaveDelay: 200,
                                    hoverCardTimout: null,
                                    hoverCardLeaveTimeout: null,
                                    hoverCardEnter () {
                                        clearTimeout(this.hoverCardLeaveTimeout);
                                        if(this.hoverCardHovered) return;
                                        clearTimeout(this.hoverCardTimout);
                                        this.hoverCardTimout = setTimeout(() => {
                                            this.hoverCardHovered = true;
                                        }, this.hoverCardDelay);
                                    },
                                    hoverCardLeave () {
                                        clearTimeout(this.hoverCardTimout);
                                        if(!this.hoverCardHovered) return;
                                        clearTimeout(this.hoverCardLeaveTimeout);
                                        this.hoverCardLeaveTimeout = setTimeout(() => {
                                            this.hoverCardHovered = false;
                                        }, this.hoverCardLeaveDelay);
                                    }
                                }" class="relative" @mouseover="hoverCardEnter()" @mouseleave="hoverCardLeave()" x-cloak>
                            <!-- Name + Time (Top Line) -->
                            <div class="flex flex-wrap sm:flex-nowrap items-center gap-1 w-auto group cursor-pointer">
                                <span class="font-inter text-2xl font-semibold text-gray-800 group-hover:text-blue-500 cursor-pointer">Md Munna</span>

                                <div class="flex items-center gap-1 sm:ml-3 ml-0">
                                    <span class="text-green-400">â€¢</span>
                                    <span class="font-inter text-sm text-gray-500 cursor-pointer">22 hr ago</span>
                                </div>
                            </div>

                            <div x-show="hoverCardHovered" class="absolute top-0 mt-5 ml-40 z-30 -translate-x-1/2 translate-y-3 left-1/2 cursor-default" x-cloak>
                                <div x-show="hoverCardHovered" class="w-[300px] h-auto flex items-start p-0" x-transition x-cloak>
                                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200 w-auto h-auto">
                                        <!-- Header: Gradient Background with SVG -->
                                        <div class="relative h-20 rounded-t-2xl overflow-hidden">
                                            <img src="{% static 'image/python.jpg' %}" alt="Card Header" class="w-full h-full object-cover" />
                                        </div>

                                        <!-- Top Section: Image + Name + Follow Button -->
                                        <div class="flex items-center justify-between p-1 mb-3">
                                            <div class="flex items-center gap-4">
                                                <div class="w-12 h-12 rounded-full ring-2 ring-white overflow-hidden shadow-sm ml-3">
                                                    <img src="{% static 'image/munna.jpeg' %}" alt="avatar" class="w-full h-full object-cover" />
                                                </div>
                                                <div>
                                                    <div class="font-inter text-[22px] font-semibold text-blue-400">MD Munna</div>
                                                    <div class="font-inter text-sm text-gray-600">Software Engineer</div>
                                                </div>
                                            </div>
                                            <button class="px-2 py-1 mr-2 -mt-3 bg-blue-600 hover:bg-blue-700 text-white rounded-full text-sm font-sm">Follow</button>
                                        </div>

                                        <!-- Middle Section: Description -->
                                        <div class="p-4 border-t border-gray-100">
                                            <p class="text-sm text-gray-600 -mt-3">This community is dedicated to Nepali culture, news, and discussion. Join to connect with others and stay updated!</p>
                                        </div>

                                        <!-- Bottom Section: Stats -->
                                        <div class="p-4 flex justify-between text-gray-600 text-sm border-t border-gray-100 -ml-2">
                                            <div class="flex flex-col items-center ml-2">
                                                <div class="text-md font-bold text-gray-800">77K</div>
                                                <div>Followers</div>
                                            </div>
                                            <div class="flex flex-col items-center">
                                                <div class="text-md font-bold text-gray-800">138</div>
                                                <div>Posts</div>
                                            </div>
                                            <div class="flex flex-col items-center">
                                                <div class="text-md font-bold text-green-500 mr-2">Active</div>
                                                <div>Status</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Gmail (Bottom Line) -->
                            <span class="text-sm text-gray-500 cursor-pointer">munnacodeexpert@gmail.com</span>
                        </div>
                    </div>

                    <!-- Dots exactly aligned with Name -->
                    <div class="text-sm mt-1">
                        <div x-data="{ open: false }" class="flex items-start gap-3 mb-4 relative">
                            <div class="flex flex-col ml-5" @click.away="open = false">
                                <div class="flex items-center gap-1 ml-60 -mt-6">
                                    <!-- Dropdown trigger -->
                                    <button @click="open = !open" class="font-inter text-sm text-gray-600 py-2 px-2 flex items-center gap-1 rounded-2xl transition-colors">
                                        <span class="text-2xl">...</span>
                                    </button>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Post Title -->
            <h1 class="text-xl font-bold mb-1 mt-3 break-words leading-tight">Software dev who wants to settle abroad directly via work visa (without masters studies)</h1>

            <!-- Post Content -->
            <div class="w-full h-20 overflow-hidden">
                <p class="mt-2 w-full h-full border-gray-100 break-words leading-0 text-gray-600 text-sm">I am a backend software dev (27M) with 3 years of work experience. I started working in 2021. For the last 1 year, I had been solely pursuing MSCS in US hoping to settle there ultimately. However, my visa was rejected. I have heard about
                    software devs applying to Japan. I am more interested in European countries like Germany, UK, Netherland. I see lots of Indian software devs (3 to 5+ work experience ) following the similar route. I just wanted to know if there are
                    Nepalese software devs who also did the same.</p>
            </div>


            <!-- Interaction Bar -->
            <div class="flex items-center justify-between mt-5 text-gray-600">
                <div class="flex items-center gap-3 flex-wrap">
                    <a class="flex items-center gap-1 bg-gray-100 rounded-2xl px-3 py-1 cursor-pointer">
                        <i class="fa-regular fa-thumbs-up"></i> Like
                    </a>
                    <a class="flex items-center gap-1 bg-gray-100 rounded-2xl px-3 py-1 cursor-pointer">
                        <i class="fa-regular fa-comment"></i> Comment
                    </a>
                    <a class="flex items-center gap-1 bg-gray-100 rounded-2xl px-3 py-1">
                        <i class="fa-regular fa-eye"></i> View
                    </a>
                    <a class="flex items-center gap-1 bg-gray-100 rounded-2xl px-3 py-1 cursor-pointer">
                        <svg rpl="" aria-hidden="true" class="icon-share rpl-rtl-icon" fill="currentColor" height="16" icon-name="share-new-outline" viewBox="0 0 20 20" width="16" xmlns="http://www.w3.org/2000/svg">
                            <!--?lit$20054865694$-->
                            <!--?lit$20054865694$-->
                            <path d="M12.8 17.524l6.89-6.887a.9.9 0 000-1.273L12.8 2.477a1.64 1.64 0 00-1.782-.349 1.64 1.64 0 00-1.014 1.518v2.593C4.054 6.728 1.192 12.075 1 17.376a1.353 1.353 0 00.862 1.32 1.35 1.35 0 001.531-.364l.334-.381c1.705-1.944 3.323-3.791 6.277-4.103v2.509c0 .667.398 1.262 1.014 1.518a1.638 1.638 0 001.783-.349v-.002zm-.994-1.548V12h-.9c-3.969 0-6.162 2.1-8.001 4.161.514-4.011 2.823-8.16 8-8.16h.9V4.024L17.784 10l-5.977 5.976z"></path>
                            <!--?-->
                        </svg> Share
                    </a>
                </div>
            </div>
        </div>

        <div x-data="{ showSearch: true }" class="mt-2 mx-auto" x-cloak>
            <!-- Search Bar -->
            <div x-show="showSearch" class="text-center w-full" x-cloak>
                <div class="relative w-full ml-0.5">
                    <input type="search" placeholder="Add your answer" class="w-[95%] pl-5 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:border-transparent shadow-sm" @focus="showSearch = false" />
                </div>
            </div>

            <!-- Answer Box -->
            <div x-show="!showSearch" class="bg-white p-4 rounded-lg -mb-6" x-cloak>
                <textarea id="editor" class="w-full rounded-lg p-2 resize-none text-sm text-gray-500" placeholder="Write your answer..."></textarea>
                <div class="flex justify-end mt-2 gap-2">
                    <!-- Cancel Button -->
                    <button @click="showSearch = true" class="px-5 py-1 border border-gray-300 text-gray-600 rounded-full hover:bg-gray-100 transition">Cancel</button>

                    <!-- Post Button -->
                    <button class="px-4 bg-blue-500 text-white rounded-full hover:bg-blue-600 shadow-sm transition">Add Post</button>
                </div>
            </div>
        </div>
    </div>

    {% comment %} Answer section {% endcomment %} {% include "forum/forum_answer.html" %}
</div>